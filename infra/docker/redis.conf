# Redis Security Configuration
# This file secures Redis to prevent unauthorized access

# Bind only to localhost (127.0.0.1)
# This prevents Redis from accepting connections from external IPs
bind 127.0.0.1

# Require password authentication
# Set this via environment variable REDIS_PASSWORD in docker-compose.yml
# requirepass YourStrongPasswordHere

# Enable protected mode
# Redis will refuse connections if no password is set
protected-mode yes

# Disable dangerous commands that could be exploited
# FLUSHDB and FLUSHALL can delete all data
rename-command FLUSHDB ""
rename-command FLUSHALL ""

# CONFIG command can be used to change Redis settings
rename-command CONFIG ""

# EVAL can execute Lua scripts (potential code injection)
# Only disable if you don't use Lua scripts
# rename-command EVAL ""

# DEBUG command can crash Redis
rename-command DEBUG ""

# SHUTDOWN command can stop Redis
# Uncomment if you want to disable remote shutdown
# rename-command SHUTDOWN ""

# Memory limits to prevent DoS attacks
maxmemory 256mb
maxmemory-policy allkeys-lru

# Enable AOF (Append Only File) persistence
appendonly yes
appendfsync everysec

# Logging
loglevel notice

# Disable some potentially dangerous features
# Comment out if you need these features
# save ""  # Disable RDB snapshots (if using AOF only)

# Connection limits
# maxclients 10000

# Timeout for idle clients (seconds)
timeout 300

# TCP keepalive
tcp-keepalive 300

